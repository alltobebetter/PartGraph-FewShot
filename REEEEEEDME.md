# 🎉 PartGraph: 我们做到了！

> **在从未见过的鸟类上，只用 5 张图片就能达到 79% 的识别准确率！**

---

## 🚀 成果展示

### 真正的 Few-Shot 评估结果（Novel Classes）

| 方法 | 5-way 5-shot 准确率 | 
|------|---------------------|
| ResNet Baseline | 47.43% |
| **Slot Attention (Ours)** | **79.24%** |
| **提升** | **+31.81%** 🔥 |

这意味着什么？
- 模型在训练时**从未见过**测试的 100 种鸟类
- 每种新鸟只给 **5 张图片**
- 然后要识别 75 张新图片
- 我们的方法准确率达到 **79%**！

---

## 🤔 这是怎么做到的？

### 传统方法 vs 我们的方法

**传统方法（像一个死记硬背的学生）**
```
看图片 → 记住整张图的样子 → 考试时找最像的

问题：换个角度、换个背景就不认识了
      需要看很多很多图片才能学会
```

**我们的方法（像一个聪明的学生）**
```
看图片 → 分解成部件（喙、翅膀、爪子...）→ 记住部件特征

考试时：这只新鸟有弯弯的喙 + 彩色羽毛 → 是鹦鹉！

优势：部件是通用的，见过麻雀的翅膀，就能认出鹦鹉的翅膀
      所以只需要几张图片就能学会新类别
```

---

## 🔧 技术详解（用比喻解释）

### 1. Slot Attention（部件发现器）

**比喻：8 个侦探分头调查一张图片**

```
图片进来后，8 个侦探（slot）开始工作：
- 侦探 1："我负责调查头部区域"
- 侦探 2："我负责调查翅膀"
- 侦探 3："我负责调查背景"
...

每个侦探写一份报告（特征向量），描述他负责区域的特征
最后把 8 份报告综合起来，就是这张图片的"部件级表征"
```

**为什么有效？**
- 不同的鸟有不同的部件组合
- 但部件本身是可以复用的（所有鸟都有喙，只是形状不同）
- 学会了部件，就能快速认识新的鸟

### 2. Prototypical Network（原型分类器）

**比喻：建立"标准照片墙"**

```
测试时，给你 5 种新鸟，每种 5 张图片：

第一步：建立原型
  鹦鹉的 5 张图 → 提取特征 → 平均 → 鹦鹉的"标准像"
  孔雀的 5 张图 → 提取特征 → 平均 → 孔雀的"标准像"
  ...

第二步：分类新图片
  新图片 → 提取特征 → 和 5 个"标准像"比较 → 最像谁就是谁
```

### 3. GNN-in-the-Loop（侦探协作机制）🆕

**比喻：让侦探们开会交流**

```
原版问题：8 个侦探各干各的，可能 2 个人都在调查头部，没人管尾巴

我们的改进：每轮调查后开个短会
  侦探 1："我在看头部"
  侦探 2："那我去看翅膀"
  侦探 8："尾巴没人管？我来！"

结果：分工更明确，覆盖更全面
```

---

## 📊 实验设置

### 数据集：CUB-200-2011（200 种鸟类）

| 划分 | 类别 | 用途 |
|------|------|------|
| Base Classes | 1-100 种鸟 | 训练（学习部件表征） |
| Novel Classes | 101-200 种鸟 | 测试（从未见过！） |

### Few-Shot 设置

- **5-way**：每次测试随机选 5 种鸟
- **5-shot**：每种鸟只给 5 张图片作为参考
- **15-query**：每种鸟要识别 15 张新图片

---

## 🏗️ 项目结构

```
PartGraph-FewShot/
├── src/
│   ├── model/
│   │   ├── slot_attention.py      # 部件发现器
│   │   ├── gnn_slot_attention.py  # 加了协作机制的版本
│   │   └── backbone.py            # ResNet 特征提取
│   ├── train_fewshot.py           # 训练脚本
│   └── eval_fewshot_novel.py      # 评估脚本
├── train_fewshot.ipynb            # Colab 一键运行
└── docs/                          # 详细文档
```

---

## 🎯 下一步计划

- [ ] 跑 GNN-in-the-Loop 版本，看能否进一步提升
- [ ] 在更多数据集上验证（miniImageNet, tieredImageNet）
- [ ] 消融实验：证明每个模块的贡献
- [ ] 写论文！

---

## 🙏 致谢

感谢 Colab 的免费 GPU，让穷学生也能做深度学习研究！

---

**最后：79% 准确率，+31% 提升，我们真的做到了！！！** 🎊🎊🎊
